<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Sat Jan 27 2018 15:22:57 GMT+0000 (UTC)  -->
<html data-wf-page="5a32ecff8f8c9600013fe05c" data-wf-site="5a0eebeaf4d5130001133201">
<head>
  <meta charset="utf-8">
  <title>Protein Analyzer</title>
  <meta content="analyzer" property="og:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="plugins/Multi-Select-Dropdown-Tree/dropdowntree.css" rel="stylesheet" type="text/css">
  <link href="plugins/fontawesome/web-fonts-with-css/css/fontawesome-all.css" rel="stylesheet" type="text/css"
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/sequence-design.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">
      WebFont.load({
        google: {
          families: ["Ubuntu:300,300italic,400,400italic,500,500italic,700,700italic", "Droid Sans:400,700", "Oswald:200,300,400,500,600,700", "Changa One:400,400italic"]
        }
      });
    </script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">
      ! function(o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
      }(window, document);
    </script>
  <link href="images/Viper.ICO" rel="shortcut icon" type="image/x-icon">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png" rel="apple-touch-icon">
  <script type="text/javascript" src="plugins/jquery-3.3.1.min.js"></script>
  <script type="text/javascript" src="plugins/popper.js"></script>
  <script type="text/javascript" src="plugins/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="plugins/Multi-Select-Dropdown-Tree/dropdowntree.js"></script>
  <script type="text/javascript" src="../node_modules/babylonjs/babylon.js"></script>
  <script type="text/javascript" src="plugins/ChartJS/Chart.bundle.min.js"></script>
  
  <script type="text/javascript" src="js/bioasa.js"></script>
  <script type="text/javascript" src="js/bioatom.js"></script>
  <script type="text/javascript" src="js/biobuilder.js"></script>
  <script type="text/javascript" src="js/biochain.js"></script>
  <script type="text/javascript" src="js/biocharts.js"></script>
  <script type="text/javascript" src="js/bioelement.js"></script>
  <script type="text/javascript" src="js/bioerrors.js"></script>
  <script type="text/javascript" src="js/bioff.js"></script>
  <script type="text/javascript" src="js/biogroup.js"></script>
  <script type="text/javascript" src="js/biomotif.js"></script>
  <script type="text/javascript" src="js/biopdbloader.js"></script>
  <script type="text/javascript" src="js/biosearch3d.js"></script>
  <script type="text/javascript" src="js/bioselector.js"></script>
  <script type="text/javascript" src="js/biostructure.js"></script>
  <script type="text/javascript" src="js/biotables.js"></script>
  <script type="text/javascript" src="js/bioutils.js"></script>
  <script type="text/javascript" src="js/bioviewer.js"></script>

  <script type="text/javascript" src="js/domutils.js"></script>
  <script type="text/javascript" src="js/geometry.js"></script>
  <script type="text/javascript" src="js/pdbutils.js"></script>

  <script type="text/javascript" src="js/phoenixanalysis.js"></script>
  <script type="text/javascript" src="js/phoenixsequence.js"></script>

  <script type="text/javascript" src="js/Util.js"></script>

  <script src="https://code.jquery.com/pep/0.4.1/pep.js"></script>
  <script type="text/javascript">
      window.onload = function() {
        var anchors = document.getElementsByTagName('*');
        for (var i = 0; i < anchors.length; i++) {
          var anchor = anchors[i];
          anchor.onclick = function() {
            code = this.getAttribute('whenclicked');
            eval(code);
          }
        }
      }
      
      var my_viewer;
      var my_structure;
      var my_selector;
      var my_selector_element;
      
      function onUpload(file) 
      {
          filename = file.name;
          console.log("Reading the file: "+filename);
          // Read a PDB file and breaks it into lines;
          // It builds a structure that is accessible via
          // the callback method
          var my_reader = ReadPDBfile(file,StructureReady);
      }
      
    function rcsbUpload(inputfield)
    {
    	  var code = inputfield.value;
    	  var request_url = RCSBUrl(code);
    	  var my_reader = new PDBurlReader(request_url,StructureReady);
    }
      
  	//THIS IS MY CALLBACK OF ASYNC FILE READER
    function StructureReady(structure)
    {
    	element1 = document.getElementById("viewer");
    	element2 = my_selector_element;
    	my_structure = structure;
    	displayMolecule(my_structure,element1);
    	displaySelector(my_structure,element2);
    }
    
	function displayMolecule(structure,element)
    {
    if(my_viewer) {
      my_viewer.destroy();
    }
    my_viewer = new BioViewer(structure,'Mol');
    while (element.firstChild) {
      element.removeChild(element.firstChild);
    }
    my_viewer.appendToDOM(element);
  }
	
	function ShowBfactor(elementID)
	{
		var element = document.getElementById(elementID);
		element.style.display = "block";
		var height = 350;
		var width = 900;
		var my_charter = new BioCharter(my_structure,window,document,element,height,width);
		//myviewer.createRamachandran(structure.groups);
		var targets = my_viewer.getSelectedGroups();
		if(targets.length == 0)
		{
			my_charter.createBfactorChart(my_structure.groups);
		}
		else
		{
			my_charter.createBfactorChart(targets);
		}
	}
	
	function ShowContacts(elementID)
	{
		var element = document.getElementById(elementID);
		element.style.display = "block";
		var height = 350;
		var width = 900;
		var my_charter = new BioCharter(my_structure,window,document,element,height,width);
		//myviewer.createRamachandran(structure.groups);
		var targets = my_viewer.getSelectedGroups();
		if(targets.length == 0)
		{
			my_charter.createContactsChart(my_structure.groups);
		}
		else
		{
			my_charter.createContactsChart(targets);
		}
	}
	
	function ShowExposure(elementID)
	{
		var element = document.getElementById(elementID);
		element.style.display = "block";
		var height = 350;
		var width = 900;
		var my_charter = new BioCharter(my_structure,window,document,element,height,width);
		//myviewer.createRamachandran(structure.groups);
		var targets = my_viewer.getSelectedGroups();
		if(targets.length == 0)
		{
			my_charter.createExposureChart(my_structure.groups);
		}
		else
		{
			my_charter.createExposureChart(targets);
		}
	}
	
	function ShowStructuralWarnings(elementID)
	{
		my_structure.getWarnings();	
	}
	
	function ShowRamachandran(elementID)
	{
		var element = document.getElementById(elementID);
		element.style.display = "block";
		
		var height = 400;
		var width = 400;
		
		element.height = height;
		
		var my_charter = new BioCharter(my_structure,window,document,element,height,width);
		//myviewer.createRamachandran(structure.groups);
		var targets = my_viewer.getSelectedGroups();
		if(targets.length == 0)
		{
			my_charter.createRamachandran(my_structure.groups);
		}
		else
		{
			my_charter.createRamachandran(targets);
		}
	}
    </script>
</head>
<body>
  <div data-collapse="medium" data-animation="default" data-duration="400" class="navbar w-nav">
    <nav role="navigation" class="nav-menu w-nav-menu">
      <a href="index.html" class="navlink home w-nav-link">Home</a>
      <a href="#Design" class="navlink viper w-nav-link">VIPER</a>
      <a href="#contact" class="navlink software w-nav-link">About Us</a>
    </nav>
    <div class="w-nav-button">
      <div class="w-icon-nav-menu"></div>
    </div>
  </div>
  <section id="Design" class="section section--main">
      <div class="w-col w-col-2">
        <div class="w-form">
          <form id="wf-form-CustomUpload" name="wf-form-CustomUpload" data-name="CustomUpload" method="post" action="FileUploadServlet" enctype="multipart/form-data">
            <div class="w-row">
              <div class="step-title analyzer options">Load Structure</div>
            </div>
            <div class="w-row">
              <div class="container--cc">
                <div class="html-embed pdbbutton analyzer w-embed"><label class="PDBButton" id="pdb-local" name="file"><input
                  type="file" accept=".pdb" id="inputfile" name="file" style="display:none" onchange="onUpload(this.files[0])">
                  Local PDB File</label>
                </div>
                <div class="text-block-2 analyzer">(<strong>PROTEIN</strong> in a <strong>PDB</strong> format)</div>
              </div>
            </div>
            <div class="w-row">
              <div class="container--cc">
                <input type="text" class="pdbbutton analyzer w-input" name="PDBrcsb" maxlength="4" onchange="rcsbUpload(this)"
                  data-name="PDBrcsb" pattern="[A-Za-z0-9]{4}$" placeholder="Load PDB (RCSB)" id="PDBrcsb">
                <div class="text-block-2 analyzer">4-letter code (e.g. 1thf)</div>
              </div>
            </div>
          </form>
        </div>
        <div class="w-row">
          <div class="step-title analyzer options">General Info</div><a href="#"
            id="warning" whenclicked="ShowStructuralWarnings('JmolBlock')"
            class="submit-button options warnings w-button">Structural Warnings</a><a
            href="#" id="peptide" class="submit-button options w-button">show
            Peptide</a><a href="#" id="ptm" class="submit-button options w-button">list
            / show<br>PTM</a><a href="#" id="hetatm"
            class="submit-button options w-button">list / show Hetatms</a><a href="#"
            id="sasa" whenclicked="ShowExposure('JmolBlock')"
            class="submit-button options w-button">SASA Profile</a><a href="#"
            id="interaction" whenclicked="ShowContacts('JmolBlock')"
            class="submit-button options w-button">Contact Profile</a><a href="#"
            id="bfactor" whenclicked="ShowBfactor('JmolBlock')"
            class="submit-button options w-button">B-factor Profile</a><a href="#"
            id="phipsi" class="submit-button options w-button"
            whenclicked="ShowRamachandran('JmolBlock')">PHI-PSI Profile</a><a href="#"
            id="water" class="submit-button options w-button">Water Profile</a>
        </div>
        <div id="JmolBlock" class="hiddenblock"></div>
        <div class="w-row">
          <div class="step-title analyzer options">Structure Manipulations</div><a
            href="#" id="clean" class="submit-button options w-button">Clean
            structure</a><a href="#" id="split"
            class="submit-button options w-button">Split Protein</a><a href="#"
            id="addh" class="submit-button options w-button">Add hydrogens</a><a
            href="#" id="repair" class="submit-button options w-button">Repair
            Missing</a><a href="#" id="phoenixrename"
            class="submit-button options w-button">Phoenix names</a>
        </div>
        <div id="StructureManipulations" class="hiddenblock"></div>
        <div class="w-row">
          <div class="step-title analyzer options">PHOENIX Manipulations</div><a href="#" id="charges"
            class="submit-button options w-button">get PARSE charges</a><a href="#"
            id="pdbinfo" class="submit-button options w-button">get PDBinfo</a><a
            href="#" id="resclass" class="submit-button options w-button">get
            resclass</a><a href="#" id="closeRes"
            class="submit-button options w-button">Nearby Residues</a>
        </div>
        <div id="PhoenixManipulations" class="hiddenblock"></div>
        <div class="w-row">
          <div class="step-title analyzer options">General Figures</div><a href="#" id="bfactorGraph"
            class="submit-button options w-button">B-factor<br>Graph</a><a href="#"
            id="sasaGraph" class="submit-button options w-button">Sasa<br>Graph</a><a
            href="#" id="phipsiGraph" class="submit-button options w-button">Phi-Psi
            Graph</a><a href="#" id="waterGraph"
            class="submit-button options w-button">water Graph</a><a href="#"
            id="interactionGraph" class="submit-button options w-button">Contact
            Graph</a><a href="#" id="motif"
            class="submit-button options motif w-button">Recognition Motif</a><a
            href="#" id="array" class="submit-button options w-button">Peptide Array</a>
        </div>
        <div id="GeneralFigures" class="hiddenblock"></div>
      </div>
      <div class="w-col w-col-10">
        <div id="viewer" class="viewer"></div>
      </div>
  </section>
  <div class="footer">
    <div class="w-row">
      <div class="w-clearfix w-col w-col-10">
        <div class="rightsreserved"><span class="viperspan">VIPER </span>©2017 R. A. CHICA, O. GAGNON ALL RIGHTS RESERVED</div>
      </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>